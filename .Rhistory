`Allocation reult`=allocation_result_final,
`Warning message`=Warning_message)%>%
mutate(Month =as.character(Month)) %>%
select(`Product code`,`Short description`, Month,Region,`Consol CBM`,`Net profit` ,`Allocation reult`,`Warning message`) %>%
datatable(
callback=JS('
$("button.buttons-copy").css({
"background": "#81D8D0",
"border": "2px solid #000000",
"color":"white",
"fontweight":"bold",
"border-radius": "10px"
});
$("button.buttons-csv").css({
"background": "#FF7900",
"border": "2px solid #000000",
"border-radius": "10px",
"color":"white",
"fontweight":"bold"
});
return table;
')
,
extensions = c('Buttons', 'Scroller'),
options = list(
scrollY = 500,
scroller = TRUE,
dom = 'Bfrtip',
buttons = list( list(extend = "copy", text = '<svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"/></svg>'),
list(extend = "csv", text = '<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>')) ,
initComplete = JS(
"function(settings, json) {",
"$(this.api().table().header()).css({'background-color': '#3A5311', 'color': '#fff'});",
"}")))%>% formatStyle(
c("Allocation reult","Warning message"), "white-space" = "pre-line"
) %>% formatStyle("Warning message",
color = "red") %>%
formatRound(c("Net profit","Consol CBM"),digits = 2)
tb_model
example_mt<-example %>% mutate(Profit = Wholesale.price-COGs, ## Calculate the Cost
Month =yearmonth(Month), ## Convert to year month
Vm= if_else(Packaging.type=="Without packaging",
Length.cm*Height.cm*Width.cm/6000,
Packaging.Length*Packaging.width*Packaging.height/6000),
Charge_weight= if_else(Vm>Actual.weight.kg, Vm,Actual.weight.kg ),                                        upcome_order= Forecast.demand - Occupied.quantity,
cbm=  Forecast.demand*Charge_weight/1000000,# CBM calculation
pkg_air_vol= if_else(Packaging.type=="Without packaging",
Product.volume.cm./(  Length.cm*Height.cm*Width.cm),
Product.volume.cm./(Packaging.Length*Packaging.width*Packaging.height)),                                   pkg_utilization= 100- round(pkg_air_vol*upcome_order*100/1000000,digits=3)
)
example_mt<-example %>% mutate(Profit = Wholesale.price-COGs, ## Calculate the Cost
Month =yearmonth(Month), ## Convert to year month
Vm= if_else(Packaging.type=="Without packaging",
Length.cm*Height.cm*Width.cm/6000,
Packaging.Length*Packaging.width*Packaging.height/6000),
Charge_weight= if_else(Vm>Actual.weight.kg, Vm,Actual.weight.kg ),
cbm=  Forecast.demand*Charge_weight/1000000,# CBM calculation
pkg_air_vol= if_else(Packaging.type=="Without packaging",
Product.volume.cm./(  Length.cm*Height.cm*Width.cm),
Product.volume.cm./(Packaging.Length*Packaging.width*Packaging.height)),
pkg_utilization= 100- round(pkg_air_vol*Forecast.demand*100/1000000,digits=3)
)
## Summarise the mean
example_sum<-example_mt  %>%
group_by(Supplier.Factory.code,Region) %>%
summarise(consolidated_cbm =sum(cbm),
consolidated_pkg_utilization =weighted.mean(pkg_utilization,cbm) )
example_join<-left_join(example_mt, example_sum,
by = c("Supplier.Factory.code", "Region"))   %>%
mutate(allocation_result_node1 = case_when(
cbm <= 0 ~" No or wrong predictive orders detected",
Region == "MEL" & cbm>0  ~ "NDC",
Region != "MEL"& consolidated_cbm >= 40 ~ "RDC",
Region != "MEL"& consolidated_cbm <  40 & consolidated_cbm>0 ~ "Other strategy to wait for FCL consolidation",
TRUE ~ NA_character_
),
Warning_message= case_when( cbm <= 0 ~"No or wrong predictive orders detected, please check your data.",
allocation_result_node1=="Other strategy to wait for FCL consolidation"~ "Warning: The maximium of  consolidation cannot fulfill FCL. Other strategy  is required",
consolidated_pkg_utilization<=80~" Warning: This batch of shipment carries highair volumes."))
example_cost_stdy <- example_join %>%
filter(allocation_result_node1=="RDC") %>%
left_join(sea_freight, by =c("POL","Region","Sensitivity")) %>%
left_join(d_transporation, by = c("Region" = "Destination")) %>%
left_join(storage, by=c("Region" = "Facility"))
example_cost_study_result<- example_cost_stdy %>%
mutate( Rev = Profit* Forecast.demand,
Cost = cbm*(`Sea freight Cost per Cubic Meter`+`Land truck Cost per Cubic Meter`+`Inventory Cost per Cubic Meter per day` + `Other fixed_miscellaneous`),
Profit_earned= round((Rev-Cost)/(Wholesale.price*Forecast.demand)*100, digits=2 ),
allocation_result_node2=if_else(Profit_earned>=10, "RDC","NDC") )
example_cost_stdy <- example_join %>%
filter(allocation_result_node1=="RDC") %>%
left_join(sea_freight, by =c("POL","Region","Sensitivity")) %>%
left_join(d_transporation, by = c("Region" = "Destination")) %>%
left_join(storage, by=c("Region" = "Facility"))
example_cost_study_result<- example_cost_stdy %>%
mutate( Rev = Profit* upcome_order,
Cost = cbm*(`Sea freight Cost per Cubic Meter`+`Land truck Cost per Cubic Meter`+`Inventory Cost per Cubic Meter per day` + `Other fixed_miscellaneous`),
Profit_earned= round((Rev-Cost)/(Wholesale.price*upcome_order)*100, digits=2 ),
allocation_result_node2=if_else(Profit_earned>=10, "RDC","NDC") )
example_final_result<- left_join( example_join, example_cost_study_result
%>% select( Product.code, Region, Profit_earned, allocation_result_node2),
by = c("Product.code", "Region") ) %>%
mutate( allocation_result_final =if_else(is.na(allocation_result_node2),
allocation_result_node1,allocation_result_node2))
example_final_result
tb_model<-  example_final_result %>% rename(`Product code`=Product.code,
`Short description` =Short.description,
`Consol CBM` =consolidated_cbm,
`Net profit` =Profit_earned,
`Allocation reult`=allocation_result_final,
`Warning message`=Warning_message)%>%
mutate(Month =as.character(Month)) %>%
select(`Product code`,`Short description`, Month,Region,`Consol CBM`,`Net profit` ,`Allocation reult`,`Warning message`) %>%
datatable(
callback=JS('
$("button.buttons-copy").css({
"background": "#81D8D0",
"border": "2px solid #000000",
"color":"white",
"fontweight":"bold",
"border-radius": "10px"
});
$("button.buttons-csv").css({
"background": "#FF7900",
"border": "2px solid #000000",
"border-radius": "10px",
"color":"white",
"fontweight":"bold"
});
return table;
')
,
extensions = c('Buttons', 'Scroller'),
options = list(
scrollY = 500,
scroller = TRUE,
dom = 'Bfrtip',
buttons = list( list(extend = "copy", text = '<svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"/></svg>'),
list(extend = "csv", text = '<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>')) ,
initComplete = JS(
"function(settings, json) {",
"$(this.api().table().header()).css({'background-color': '#3A5311', 'color': '#fff'});",
"}")))%>% formatStyle(
c("Allocation reult","Warning message"), "white-space" = "pre-line"
) %>% formatStyle("Warning message",
color = "red") %>%
formatRound(c("Net profit","Consol CBM"),digits = 2)
runApp('AMESdashboard')
View(example)
runApp('AMESdashboard')
runApp('AMESdashboard')
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
read.csv(file$datapath, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (input$file1==NA){
data<-iris
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
}
read.csv(file$datapath, header = input$header)
})
}
shinyApp(ui, server)
data<-iris
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (input$file1==NA){
data<-iris
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
}
read.csv(file$datapath, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (input$file1==NA){
data<-iris
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
}
read.csv(data, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (input$file1==NA){
data<-iris
return(data)
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
}
read.csv(data, header = input$header)
return(data)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (input$file1==NA){
data<-iris
return(data)
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
return(data)
}
read.csv(data, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (is.null(input$file1){
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (is.null(input$file1)){
data<-iris
return(data)
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
return(data)
}
read.csv(data, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (is.null(input$file1)){
data<-iris
return(data)
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
return(data)
}
read.csv(data, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (is.null(input$file1)){
data<-iris
return(data)
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- "file$datapath"
return(data)
}
read.csv(data, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (is.null(input$file1)){
data<-iris
return(data)
} else{
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
data<- file$datapath
return(data)
}
read.csv(data, header = input$header)
})
}
shinyApp(ui, server)
ui <- fluidPage(
sidebarLayout(
sidebarPanel(
fileInput("file1", "Choose CSV File", accept = ".csv"),
checkboxInput("header", "Header", TRUE)
),
mainPanel(
tableOutput("contents")
)
)
)
server <- function(input, output) {
output$contents <- renderTable({
if (is.null(input$file1)) {
# If no file is uploaded, use iris dataset
iris
} else {
file <- input$file1
ext <- tools::file_ext(file$datapath)
req(file)
validate(need(ext == "csv", "Please upload a csv file"))
read.csv(file$datapath, header = input$header)
}
})
}
shinyApp(ui, server)
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
ui <- fluidPage(
checkboxGroupInput("variable", "Variables to show:",
c("Cylinders" = "cyl",
"Transmission" = "am",
"Gears" = "gear")),
tableOutput("data")
)
server <- function(input, output, session) {
output$data <- renderTable({
mtcars[, c("mpg", input$variable), drop = FALSE]
}, rownames = TRUE)
}
shinyApp(ui, server)
shinyApp(ui, server)
library(shiny)
ui <- fluidPage(
checkboxGroupInput("choices", "Choose options:",
choices = c("Option 1", "Option 2", "Option 3"),
selected = c("Option 1", "Option 2"))
)
server <- function(input, output) {
}
shinyApp(ui = ui, server = server)
ui <- fluidPage(
radioButtons("choice", "Choose an option:",
choices = c("Option 1", "Option 2", "Option 3"),
selected = "Option 1")
)
server <- function(input, output) {
}
ui <- fluidPage(
radioButtons("choice", "Choose an option:",
choices = c("Option 1", "Option 2", "Option 3"),
selected = "Option 1")
)
server <- function(input, output) {
}
shinyApp(ui = ui, server = server)
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
runApp('AMESdashboard')
